# üçé Chatbot Liquid Glass - Apple-Inspired Design

Apple style, liquid glass chatbot widget that sits on any website and talks to your backend AI workflow.  
Built with plain JavaScript, no heavy framework, and easy to skin for any brand.

---

## What this chatbot does now

- Shows a floating, Apple like glass widget on the site
- Guides the user through a structured support flow instead of a free for all chat
- Calls your AI backend (n8n / Node / whatever) with the user question and session data
- Shows AI answers with an explicit AI disclaimer step
- Lets the user:
  - Rate the answer
  - Choose a feedback reason
  - Add optional free text feedback
  - Mark themselves as customer or not sure etc
- Handles "Talk to human" by sending the user to the correct contact page
- Sends a final feedback payload to your backend that you can store in PostgreSQL

---

## Features

### UI and UX

- Apple style liquid glass design with blur and subtle shadows
- Floating badge that expands into a full chat panel
- Mobile friendly and responsive
- Accessible title, focus states, and keyboard navigation
- Brand colors, logo, and copy all configurable in a single JS config

### Conversation flow

The default flow is step based:

1. `start`  
   Show greeting, basic copy about what the bot can help with, and privacy hint.

2. `collect_topic`  
   User picks a topic or intent from quick reply buttons  
   Example: "Pricing", "Addresses and locations", "How it works", "Technical issues", "Other".

3. `collect_question`  
   User types their actual question.  
   Widget sends `{ session_id, step, topic, question }` to your backend.

4. `ai_answer`  
   Backend returns an answer.  
   Widget renders:
   - AI answer text
   - Optional links (for example pricing page, contact page)
   - AI disclaimer badge like "This answer is generated by AI. Please verify important details."

5. `feedback`  
   After the answer is shown, the user sees:
   - Rating 1 to 5
   - Feedback options: for example `answer_helped`, `answer_wrong`, `too_generic`, `other`
   - Optional comment box for free text feedback
   - User type selector: `customer`, `not_customer`, `not_sure`

6. `send_ai_disclaimer` / `handoff`  
   If the user taps "Talk to a human", the bot:
   - Shows a short message explaining that a human can help further
   - Shows a button to open your contact page or support form
   - Ends the chat session gracefully

All steps are controlled from the front end through a clear `step` field so your backend and database can understand what is happening.

---

## Backend contracts

You can wire the widget to any backend. Typical pattern:

### Chat endpoint

`POST /api/chat`

Request body example:

```json
{
  "session_id": "session_761a2752-b395-4e97-aec4-301e528ba051",
  "step": "ai_answer",
  "topic": "pricing",
  "question": "What is the cost?",
  "history": [
    {
      "role": "user",
      "content": "What is the cost?"
    }
  ],
  "meta": {
    "user_agent": "Mozilla/5.0",
    "page_url": "https://example.com/pricing"
  }
}

Response example:

{
  "answer": "Our pricing starts at 14.90 per month per address. You can find all details on the pricing page.",
  "links": [
    {
      "label": "Open pricing page",
      "url": "https://example.com/pricing"
    }
  ],
  "show_disclaimer": true,
  "continue_step": "feedback"
}

Feedback endpoint

POST /api/chat/feedback

This is what the widget sends at the end of the flow:

{
  "step": "send_ai_disclaimer",
  "session_id": "session_761a2752-b395-4e97-aec4-301e528ba051",
  "rating": 5,
  "feedback_option": "other",
  "feedback_text": "",
  "user_type": "not_sure",
  "question": "What is the cost?",
  "answer": "Our pricing starts at 14.90 per month per address..."
}

You typically store this payload in PostgreSQL in a table like chatbot_feedback with columns:
	‚Ä¢	id
	‚Ä¢	session_id
	‚Ä¢	step
	‚Ä¢	rating
	‚Ä¢	feedback_option
	‚Ä¢	feedback_text
	‚Ä¢	user_type
	‚Ä¢	question
	‚Ä¢	answer
	‚Ä¢	created_at

‚∏ª

Quick start
	1.	Include the script

<link rel="stylesheet" href="/chatbot/chatbot.css" />
<script src="/chatbot/chatbot.js" defer></script>

	2.	Initialize the widget

<script>
  window.addEventListener("DOMContentLoaded", () => {
    window.ChatbotLiquidGlass.init({
      apiBaseUrl: "https://your-backend.com/api",
      contactPageUrl: "https://your-website.com/contact",
      brand: {
        name: "The Digital PO Box",
        primaryColor: "#028D89",
        accentColor: "#FF6B3D",
        logoUrl: "/assets/logo.svg"
      },
      sounds: {
        enabled: true,
        message: "/chatbot/sounds/message.mp3"
      }
    });
  });
</script>

	3.	Implement the backend

	‚Ä¢	POST /api/chat to call your AI workflow and return the answer object
	‚Ä¢	POST /api/chat/feedback to store rating and feedback in PostgreSQL

‚∏ª

Configuration options

ChatbotLiquidGlass.init(options) accepts:

type ChatbotOptions = {
  apiBaseUrl: string
  contactPageUrl: string
  brand?: {
    name?: string
    primaryColor?: string
    accentColor?: string
    logoUrl?: string
  }
  sounds?: {
    enabled?: boolean
    message?: string
  }
  defaults?: {
    locale?: string
    initialTopic?: string | null
  }
}

You can extend this in code if you need more advanced behavior.

‚∏ª

Development

git clone https://github.com/alzeenia/chatbot-liquid-glass.git
cd chatbot-liquid-glass
npm install
npm run dev

The dev server will serve a demo page so you can test changes to the widget and styles.

‚∏ª

Changelog

v2.x (Current)
	‚Ä¢	Step based support flow with rating and feedback
	‚Ä¢	AI disclaimer step
	‚Ä¢	‚ÄúTalk to human‚Äù contact handoff
	‚Ä¢	Feedback JSON payload ready for PostgreSQL
	‚Ä¢	Session id based tracking

v1.0.0
	‚Ä¢	Initial Apple liquid glass design
	‚Ä¢	Sound effects
	‚Ä¢	Smart badge notifications
	‚Ä¢	Reset functionality
	‚Ä¢	Option buttons
	‚Ä¢	Base production widget

‚∏ª

**Made with ‚ù§Ô∏è for The Digital PO Box**
